const inventory = new Map();

const addToInventory = (item, n) => {
  const currentQuantity = inventory.get(item) || 0;
  const newQuantity = currentQuantity + n;
  inventory.set(item, newQuantity);
  return newQuantity;
};

const getInventory = () => {
  const contentArray = Array.from(inventory.entries());
  const contents = contentArray.reduce((contents, [name, quantity]) => {
    return Object.assign({ [name]: quantity }, contents);
  }, {});

  return { ...contents, generatedAt: new Date().toISOString() };
};

module.exports = { inventory, addToInventory, getInventory };
