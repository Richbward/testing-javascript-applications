const { inventory, isItemAvailable } = require("./inventoryController");

const carts = new Map();

const addItemToCart = (username, item) => {
  if (!isItemAvailable(item)) {
    throw new Error(`${item} is unavailable`);
  }

  const newItems = (carts.get(username) || []).concat(item);
  carts.set(username, newItems);
  inventory.set(item, inventory.get(item) - 1);
  return newItems;
};

module.exports = { addItemToCart, inventory };
